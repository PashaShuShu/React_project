(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){e.exports={nav__menu:"Navbar_nav__menu__rP-fd",nav__item:"Navbar_nav__item__1hPzG",active:"Navbar_active__Gp-NF",top__friends:"Navbar_top__friends__2ocTC"}},21:function(e,t,n){e.exports={friend:"Users_friend__9XYzU",selectedPage:"Users_selectedPage__10Veq",page:"Users_page__LjuA4",pages:"Users_pages__2Y0Ot"}},26:function(e,t,n){e.exports={info:"Info_info__1jhmd",avatar:"Info_avatar__1WQKu",description:"Info_description__387a9",uploadPhoto:"Info_uploadPhoto__1SIMI"}},30:function(e,t,n){e.exports={logo__and__name:"Header_logo__and__name__3bp2L",name:"Header_name__2tzP3",loginBlock:"Header_loginBlock__2P38k"}},31:function(e,t,n){e.exports={my__post:"MyPosts_my__post__EswJY"}},36:function(e,t,n){e.exports={content__head:"Profile_content__head__qXFYQ"}},37:function(e,t,n){e.exports={item:"Post_item__3-ZdD",like:"Post_like__2FxAS"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),a=n(10),s=n(11),c=n(13),o=n(12),i=n(1),u=n.n(i),l=n(5),j=n(7),p=n(0),d=function(e){return{isAuth:e.auth.isAuth}},b=function(e){var t=function(t){Object(c.a)(i,t);var n=Object(o.a)(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(s.a)(i,[{key:"render",value:function(){return this.props.isAuth?Object(p.jsx)(e,Object(r.a)({},this.props)):Object(p.jsx)(l.a,{to:"/login"})}}]),i}(u.a.Component);return Object(j.b)(d,{})(t)}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var r=n(22),a=n(2),s="ADD-MESSAGE",c="UPDATE-NEW-MESSAGE-TEXT",o={newMessageText:"",dialogsData:[{id:1,name:"Vika",img:"https://media.gq.com/photos/55828922e52bc4b477a9714f/master/pass/blogs-the-feed-dick-pic-tumblr-635.jpg"},{id:2,name:"Alex",img:"https://i1.sndcdn.com/artworks-000240511894-n0z5cp-t500x500.jpg"},{id:3,name:"Dmitry",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPTTZe_3l6aDKO88sHV9kA7xxrs5zHYronCxAaDE0PWF5ruKKtBrBkIm-HC7Q_nruuBEE&usqp=CAU"}],messagesData:[{id:1,sentBy:"r",message:"Hollo"},{id:2,sentBy:"l",message:"Hallo"},{id:3,sentBy:"l",message:"How are you"},{id:4,sentBy:"l",message:"Not bad"},{id:5,sentBy:"r",message:"Me too"},{id:6,sentBy:"l",message:"I have not asked you"},{id:7,sentBy:"l",message:"suka"},{id:8,sentBy:"r",message:"suka"},{id:9,sentBy:"l",message:"Dblia blia bliaima"},{id:10,sentBy:"r",message:"you are chiort"}]},i=function(){return{type:s}},u=function(e){return{type:c,newText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(a.a)(Object(a.a)({},e),{},{newMessageText:"",messagesData:[].concat(Object(r.a)(e.messagesData),[{id:e.messagesData.length+1,sentBy:"r",message:e.newMessageText}])});case c:return Object(a.a)(Object(a.a)({},e),{},{newMessageText:t.newText});default:return e}}},50:function(e,t,n){e.exports={load:"Preloader_load__-0d9G"}},51:function(e,t,n){e.exports={error:"MyPostForms_error__1Lagx"}},55:function(e,t,n){},60:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);n(55);var r=n(1),a=n.n(r),s=n(27),c=n.n(s),o=n(10),i=n(11),u=n(13),l=n(12),j=(n(60),n(2)),p=n(8),d=n(30),b=n.n(d),h=n(0),f=function(e){return Object(h.jsxs)("header",{children:[Object(h.jsxs)("div",{className:b.a.logo__and__name,children:[Object(h.jsx)("img",{src:"https://img2.freepng.ru/20180518/jjg/kisspng-moroccan-cuisine-logo-sahara-restaurant-middle-eas-5aff5f15226751.5303971415266854611409.jpg"}),Object(h.jsx)("span",{className:b.a.name,children:"SHARA.NET"}),Object(h.jsx)(p.b,{to:"/hooks",children:"Hooks"})]}),Object(h.jsx)("div",{className:b.a.loginBlock,children:e.isAuth?Object(h.jsxs)("div",{children:[e.login,Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:e.logoutUser,children:"Logout"})})]}):Object(h.jsx)(p.b,{to:"/login",children:"Login"})})]})},O=n(7),g=n(4),m=n.n(g),x=n(9),v=n(49).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9eb30f89-e9e4-4d8e-ace2-9693fb3d61df"}}),_=function(e,t){return v.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},P=function(e){return v.delete("follow/".concat(e)).then((function(e){return e.data}))},w=function(e){return v.post("follow/".concat(e)).then((function(e){return e.data}))},y=function(){return v.get("auth/me").then((function(e){return e.data}))},k=function(e){return v.get("profile/".concat(e)).then((function(e){return e.data}))},C=function(e){return v.get("profile/status/"+e)},S=function(e){return v.put("profile/status",{status:e})},T=function(e){var t=new FormData;return t.append("image",e),v.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},N=function(e,t,n,r){return""!==r?v.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}):v.post("auth/login",{email:e,password:t,rememberMe:n})},U=function(){return v.delete("auth/login")},E=function(){return v.get("security/get-captcha-url")},I="SET-AUTH-USET-DATA",A="SET-USER-LOGDATA-ERROR",L="SET-USER-CAPTCHA-URL",D={userId:null,email:null,login:null,isAuth:!1,error:null,protection:{captchaURL:""}},R=function(e,t,n,r){return{type:I,payload:{userId:e,email:t,login:n,isAuth:r}}},F=function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r,a,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,s=r.email,c=r.login,t(R(a,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:n=e.sent,r=n.data.url,t({type:L,url:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(j.a)(Object(j.a)(Object(j.a)({},e),t.payload),{},{error:null,captcha:""});case A:return Object(j.a)(Object(j.a)({},e),{},{error:t.error,captcha:""});case L:return Object(j.a)(Object(j.a)({},e),{},{protection:Object(j.a)(Object(j.a)({},e.protection),{},{captchaURL:t.url})});default:return e}},B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(f,Object(j.a)({},this.props))}}]),n}(a.a.Component),G=Object(O.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logoutUser:function(){return function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:0===e.sent.data.resultCode&&(console.log("EXIT"),t(R(null,null,null,!1)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(B),H=(n(86),function(){return Object(h.jsx)("footer",{children:"All rights are defended fuck you"})}),q=n(14),W=n.n(q),X=function(e){return Object(h.jsx)("nav",{children:Object(h.jsxs)("div",{className:W.a.nav__menu,children:[Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/profile",activeClassName:W.a.active,children:"Profile"})}),Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/dialogs",activeClassName:W.a.active,children:"Messages"})}),Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/news",activeClassName:W.a.active,children:"News"})}),Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/music",activeClassName:W.a.active,children:"Music"})}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/users",activeClassName:W.a.active,children:"Users"})}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:W.a.nav__item,children:Object(h.jsx)(p.b,{to:"/settings",activeClassName:W.a.active,children:"Settings"})})]})})},Y=n(36),K=n.n(Y),V=n(26),Z=n.n(V),J=n(50),Q=n.n(J),$=function(e){return Object(h.jsx)("img",{className:Q.a.load,src:"https://orig04.deviantart.net/4590/f/2017/119/c/e/grooving_cactus__green__by_funymony-db7le16.gif"})},ee=n(38),te=function(e){var t=Object(r.useState)(!0),n=Object(ee.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.status),o=Object(ee.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{children:a?Object(h.jsx)("div",{children:Object(h.jsx)("span",{onDoubleClick:function(){s(!1)},children:e.status||"I dont have status"})}):Object(h.jsx)("div",{children:Object(h.jsx)("input",{placeholder:"\u043c\u043e\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",onChange:function(e){var t=e.currentTarget.value;u(t)},onMouseLeave:function(){s(!0),e.updateStatus(i)},value:i})})})})},ne=n(22),re="ADD-POST",ae="UPDATE-NEW-POST-TEXT",se="SET-USER-PROFILE",ce="SET-NEW-STATUS-TEXT",oe="UPLOAD-PHOTO-SUCCESS",ie={newPostText:"",profile:null,status:"",postsData:[{id:1,name:"Pasha",message:"boo boo bi bi",likes_count:122},{id:2,name:"Pasha",message:"ifro frau",likes_count:233},{id:3,name:"Pasha",message:"isgold de fag",likes_count:223},{id:4,name:"Pasha",message:"de fag",likes_count:2223}]},ue=function(e){return{type:se,profile:e}},le=function(e){return{type:ce,text:e}},je=function(e){return function(t){S(e).then((function(n){0===n.data.resultCode&&t(le(e))}))}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(j.a)(Object(j.a)({},e),{},{newPostText:"",postsData:[].concat(Object(ne.a)(e.postsData),[{id:e.postsData.length+1,name:"Pasha",message:e.newPostText,likes_count:0}])});case ae:return Object(j.a)(Object(j.a)({},e),{},{newPostText:t.newText});case se:return Object(j.a)(Object(j.a)({},e),{},{profile:t.profile});case ce:return Object(j.a)(Object(j.a)({},e),{},{status:t.text});case oe:return Object(j.a)(Object(j.a)({},e),{},{profile:Object(j.a)(Object(j.a)({},e.profile),{},{photos:t.photo})});default:return e}},de=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)(te,Object(j.a)({},this.props))})}}]),n}(a.a.Component),be=Object(O.b)((function(e){return{status:e.profilePage.status}}),{updateStatus:je})(de),he=n.p+"static/media/ava2.5eacbf8a.gif",fe=function(e){var t=a.a.useRef();if(!e.profile)return Object(h.jsx)($,{});var n=function(){var n=Object(x.a)(m.a.mark((function n(r){var a,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=t.current.files).length){n.next=8;break}return n.next=4,e.uploadPhoto(a[0]);case 4:s=n.sent,alert(s),n.next=9;break;case 8:alert("how about new avatar?");case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:Z.a.info,children:[Object(h.jsxs)("div",{className:Z.a.avatar,children:[Object(h.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:he}),Object(h.jsx)("div",{children:e.owner?Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{ref:t,type:"file"}),Object(h.jsx)("div",{onClick:n,className:Z.a.uploadPhoto,children:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]}):null})]}),Object(h.jsxs)("div",{className:Z.a.description,children:[e.profile.fullName,Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"About me"}),Object(h.jsx)(be,{status:e.status})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["instagram: ",Object(h.jsx)("a",{href:e.profile.contacts.instagram,children:"\u0447\u0435\u043a\u0430\u0439 \u043c\u043e\u0439 \u0438\u043d\u0441\u0442"})]}),Object(h.jsxs)("h3",{children:["git: ",Object(h.jsx)("a",{href:e.profile.contacts.github,children:"\u0447\u0435\u043a\u0430\u0439 \u043c\u043e\u0439 \u0433\u0438\u0442"})]})]})]})]})},Oe=n(31),ge=n.n(Oe),me=n(37),xe=n.n(me),ve=function(e){return Object(h.jsx)("div",{className:"Post",children:Object(h.jsxs)("div",{className:xe.a.item,children:[Object(h.jsx)("img",{src:"https://cs9.pikabu.ru/post_img/big/2018/10/22/10/1540228059127699409.jpg"}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:e.name}),Object(h.jsx)("div",{children:e.message}),Object(h.jsxs)("div",{className:xe.a.like,children:[Object(h.jsx)("span",{children:Object(h.jsx)("img",{src:"https://pngicon.ru/file/uploads/like.png"})}),Object(h.jsx)("input",{id:"like",type:"number",value:e.likes_count,readOnly:!0})]})]})})},_e=n(51),Pe=n.n(_e),we=n(20),ye=n(54),ke=["input"],Ce=function(e){var t=e.input,n=Object(ye.a)(e,ke);return Object(h.jsx)("div",{children:Object(h.jsx)("textarea",Object(j.a)(Object(j.a)(Object(j.a)({},t),n),{},{placeholder:n.placeholder}))})},Se=function(e){var t;return Object(h.jsx)(we.b,{onSubmit:function(t){e.updatePostText(t.post),e.addPost()},validate:(t=100,function(e){var n={};return e.post?e.post.length>t&&(n.post="to long"):n.post="Do you want to make a post?",n}),render:function(e){var t=e.handleSubmit;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)("lable",{children:"Make a post"}),Object(h.jsx)(we.a,{name:"post",children:function(e){var t=e.input,n=e.meta;return Object(h.jsxs)("div",{children:[Object(h.jsx)(Ce,Object(j.a)(Object(j.a)({},t),{},{placeholder:"some post text"})),n.touched&&n.error&&Object(h.jsx)("span",{className:Pe.a.error,children:n.error})]})}}),Object(h.jsx)("button",{type:"submit",children:"Post"})]})}})},Te=function(e){var t=e.posts.map((function(e){return Object(h.jsx)(ve,{name:e.name,message:e.message,likes_count:e.likes_count},e.id)}));return t.reverse(),Object(h.jsx)("div",{className:"Post",children:Object(h.jsxs)("div",{className:ge.a.post,children:[Object(h.jsx)("div",{className:ge.a.my__post,children:Object(h.jsx)(Se,{addPost:e.addPost,updatePostText:e.updatePostText})}),Object(h.jsx)("div",{className:ge.a.posts,children:t})]})})},Ne=Object(O.b)((function(e){return{posts:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{updatePostText:function(e){return{type:ae,newText:e}},addPost:function(){return{type:re}}})((function(e){return console.log("rerender"),Object(h.jsx)(Te,Object(j.a)({},e))})),Ue=function(e){return Object(h.jsxs)("div",{className:"Content",children:[Object(h.jsx)("div",{className:K.a.content__head,children:Object(h.jsx)("img",{src:"https://i.gifer.com/1Zla.gif"})}),Object(h.jsxs)("div",{className:K.a.post__content,children:[Object(h.jsx)(fe,{uploadPhoto:e.uploadPhoto,owner:e.owner,profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(h.jsx)("h3",{children:"My posts"}),Object(h.jsx)(Ne,{})]})]})},Ee=n(5),Ie=n(47),Ae=n(19),Le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(){this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsx)(Ue,Object(j.a)(Object(j.a)({owner:!this.props.match.userId,uploadPhoto:this.props.uploadPhoto},this.props),{},{status:this.props.status}))}}]),n}(a.a.Component),De=Object(Ae.c)(Object(O.b)((function(e){return{profile:e.profilePage.profile,authUserId:e.auth.userId,status:e.profilePage.status}}),{getUserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){k(e).then((function(e){t(ue(e))}))}},getStatus:function(e){return function(t){C(e).then((function(e){t(le(e.data))}))}},updateStatus:je,uploadPhoto:function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:if(0!==(r=t.sent).data.resultCode){t.next=6;break}return n(le(r.data.data.photos.small)),t.abrupt("return","succsess");case 6:return t.abrupt("return",r.data.messages[0]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ee.f,Ie.a)(Le),Re=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(j.a)(Object(j.a)({},e),r):e}))},Fe="FOLLOW",Me="UNFOLLOW",ze="SET-USERS",Be="SET-CURRENT-PAGE",Ge="SETUSER-TOTAL-COUNT",He="TOGGLE-IS-FETCHING",qe="TOGGLE-IS-FOLLOWING-PROGRESS",We={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},Xe=function(e){return{type:Fe,userId:e}},Ye=function(e){return{type:Me,userId:e}},Ke=function(e){return{type:He,isFetching:e}},Ve=function(e,t){return{type:qe,isFetching:e,userId:t}},Ze=function(){var e=Object(x.a)(m.a.mark((function e(t,n,r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ve(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(a(n)),t(Ve(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(j.a)(Object(j.a)({},e),{},{users:Re(e.users,t.userId,"id",{followed:!0})});case Me:return Object(j.a)(Object(j.a)({},e),{},{users:Re(e.users,t.userId,"id",{followed:!1})});case ze:return Object(j.a)(Object(j.a)({},e),{},{users:Object(ne.a)(t.users)});case Be:return Object(j.a)(Object(j.a)({},e),{},{currentPage:t.currentPage});case Ge:return Object(j.a)(Object(j.a)({},e),{},{totalUsersCount:t.count});case He:return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case qe:return Object(j.a)(Object(j.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(ne.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},Qe=n(21),$e=n.n(Qe),et=function(e){var t=e.users,n=e.followingInProgress,r=e.unfollow,a=e.follow;return Object(h.jsx)(h.Fragment,{children:t.map((function(e){return Object(h.jsxs)("div",{className:$e.a.friend,children:[Object(h.jsx)(p.b,{to:"/profile/"+e.id,children:Object(h.jsx)("img",{src:null!=e.photos.small?e.photos.small:he})}),Object(h.jsx)("div",{children:e.name}),Object(h.jsx)("div",{children:e.status}),e.followed?Object(h.jsx)("button",{disabled:n.some((function(t){return t===e.id})),onClick:function(){r(e.id)},children:"unfollow"}):Object(h.jsx)("button",{disabled:n.some((function(t){return t===e.id})),onClick:function(){a(e.id)},children:"follow"})]},e.id)}))})},tt=function(e){var t=e.currentPage,n=e.p,r=e.setCurrentPage,a=e.onPageChanged;return Object(h.jsxs)("span",{className:t===n?$e.a.selectedPage:$e.a.page,onClick:t!==n?function(){r(n),a(n)}:null,children:[" ",n," "]})},nt=function(e){return Object(h.jsx)("div",{className:$e.a.pages,children:Object(h.jsx)("div",{children:e.pages.map((function(t){return 1===t||Math.abs(e.currentPage-t)<5||t===e.pages.length?Object(h.jsx)(tt,{p:t,currentPage:e.currentPage,setCurrentPage:e.setCurrentPage,onPageChanged:e.onPageChanged}):Math.abs(e.currentPage-t)<6?"...":void 0}))})})},rt=function(e){return Object(h.jsxs)("div",{className:$e.a.friendsList,children:[Object(h.jsx)(et,{users:e.users,followingInProgress:e.followingInProgress,unfollow:e.unfollow,follow:e.follow}),Object(h.jsx)(nt,{setCurrentPage:e.setCurrentPage,currentPage:e.currentPage,onPageChanged:e.onPageChanged,pages:e.pages})]})},at=n(52),st=function(e){return e.usersPage.users},ct=(Object(at.a)(st,(function(e){return e.filter((function(e){return!0}))})),function(e){return e.usersPage.pageSize}),ot=function(e){return e.usersPage.totalUsersCount},it=function(e){return e.usersPage.currentPage},ut=function(e){return e.usersPage.isFetching},lt=function(e){return e.usersPage.followingInProgress},jt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.requestUsersPages(t,e.props.pageSize)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsersPages(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){for(var e=Math.ceil(this.props.totalUsersCount/this.props.pageSize),t=[],n=1;n<=e;n++)t.push(n);return Object(h.jsx)(h.Fragment,{children:this.props.isFetching?Object(h.jsx)($,{}):Object(h.jsx)(rt,{pages:t,pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress,currentPage:this.props.currentPage,setCurrentPage:this.props.setCurrentPage})})}}]),n}(a.a.Component),pt=Object(O.b)((function(e){return{users:st(e),pageSize:ct(e),totalUsersCount:ot(e),currentPage:it(e),isFetching:ut(e),followingInProgress:lt(e)}}),{follow:function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ze(n,e,w,Xe);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ze(n,e,P,Ye);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:function(e){return{type:Be,currentPage:e}},requestUsersPages:function(e,t){return function(){var n=Object(x.a)(m.a.mark((function n(r){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Ke(!0)),n.next=3,_(e,t);case 3:a=n.sent,r(Ke(!1)),r((c=a.items,{type:ze,users:c})),r((s=a.totalCount,{type:Ge,count:s}));case 7:case"end":return n.stop()}var s,c}),n)})));return function(e){return n.apply(this,arguments)}}()}})(jt),dt=function(e){var t={};return e.login||(t.login="how about login?"),e.password||(t.password="how about password?"),t},bt=function(e){var t=e.loginUser,n=e.error,r=e.captchaURL,a=function(){var e=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(r.login,r.password,r.rememberMe,r.captcha),!n){e.next=3;break}return e.abrupt("return",{login:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(we.b,{onSubmit:a,validate:dt,render:function(e){var t=e.handleSubmit;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(we.a,{name:"login",children:function(e){var t=e.input,n=e.meta;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"text",placeholder:"login"})),(n.error||n.submitError)&&n.touched&&Object(h.jsx)("span",{children:n.error||n.submitError})]})}}),Object(h.jsx)(we.a,{name:"password",children:function(e){var t=e.input,n=e.meta;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{type:"password",placeholder:"Password"})),n.error&&n.touched&&Object(h.jsx)("span",{children:n.error})]})}}),r?Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:r}),Object(h.jsx)("div",{children:Object(h.jsx)(we.a,{name:"captcha",type:"text",component:"input"})})]}):null,Object(h.jsxs)("div",{children:[Object(h.jsx)(we.a,{name:"rememberMe",component:"input",type:"checkbox"}),Object(h.jsx)("supn",{children:"remember me"})]}),Object(h.jsx)("button",{type:"submit",children:" log in "})]})}})},ht=function(e){return e.isAuth?Object(h.jsx)(Ee.a,{to:"/profile"}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)(bt,{captchaURL:e.captchaURL,error:e.error,loginUser:e.loginUser})]})},ft=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ht,{captchaURL:this.props.captchaURL,error:this.props.error,isAuth:this.props.isAuth,loginUser:this.props.loginUser})})}}]),n}(a.a.Component),Ot=Object(O.b)((function(e){return{isAuth:e.auth.isAuth,error:e.auth.error,captchaURL:e.auth.protection.captchaURL}}),{loginUser:function(e,t,n,r){return function(){var a=Object(x.a)(m.a.mark((function a(s){var c,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N(e,t,n,r);case 2:0===(c=a.sent).data.resultCode?(console.log("success"),s(F())):10===c.data.resultCode?s(M()):(o=c.data.messages.length>0?c.data.messages[0]:"some error",s({type:A,error:o}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(ft),gt="SET_INITIALIZED",mt={initialized:!1},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gt:return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return Object(j.a)({},e)}},vt=n(48),_t={},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0;return t.type,e},wt=n(53),yt=Object(Ae.b)({profilePage:pe,dialogsPage:vt.b,sidebar:Pt,usersPage:Je,auth:z,app:xt}),kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ae.c,Ct=Object(Ae.d)(yt,kt(Object(Ae.a)(wt.a))),St=a.a.lazy((function(){return n.e(4).then(n.bind(null,91))})),Tt=a.a.lazy((function(){return n.e(3).then(n.bind(null,92))})),Nt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(h.jsxs)("div",{className:"app__wrapper",children:[Object(h.jsx)("div",{className:"app__wrapper__header",children:Object(h.jsx)(G,{})}),Object(h.jsx)("div",{className:"app__wrapper__nav",children:Object(h.jsx)(X,{})}),Object(h.jsxs)("div",{className:"app__wrapper__content",children:[Object(h.jsx)(Ee.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(De,{})}}),Object(h.jsx)(Ee.b,{path:"/dialogs",render:function(){return Object(h.jsx)(a.a.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsx)(Tt,{})})}}),Object(h.jsx)(Ee.b,{path:"/users",render:function(){return Object(h.jsx)(pt,{})}}),Object(h.jsx)(Ee.b,{path:"/login",render:function(){return Object(h.jsx)(Ot,{})}}),Object(h.jsx)(Ee.b,{path:"/hooks",render:function(){return Object(h.jsx)(a.a.Suspense,{fallback:Object(h.jsx)("div",{children:"Loading..."}),children:Object(h.jsx)(St,{})})}})]}),Object(h.jsx)("div",{className:"app__wrapper__footer",children:Object(h.jsx)(H,{})})]}):Object(h.jsx)($,{})}}]),n}(a.a.Component),Ut=Object(Ae.c)(Ee.f,Object(O.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(F());Promise.all([t]).then((function(){e({type:gt})}))}}}))(Nt),Et=function(e){return Object(h.jsx)(p.a,{basename:"/React_project",children:Object(h.jsx)(O.a,{store:Ct,children:Object(h.jsx)(Ut,{})})})};c.a.render(Object(h.jsx)(Et,{}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.6796d1f8.chunk.js.map