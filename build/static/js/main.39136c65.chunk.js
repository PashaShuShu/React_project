(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(e,t,n){e.exports={nav__menu:"Navbar_nav__menu__rP-fd",nav__item:"Navbar_nav__item__1hPzG",active:"Navbar_active__Gp-NF",top__friends:"Navbar_top__friends__2ocTC"}},21:function(e,t,n){e.exports={friend:"Users_friend__9XYzU",selectedPage:"Users_selectedPage__10Veq",page:"Users_page__LjuA4",pages:"Users_pages__2Y0Ot"}},29:function(e,t,n){e.exports={logo__and__name:"Header_logo__and__name__3bp2L",name:"Header_name__2tzP3",loginBlock:"Header_loginBlock__2P38k"}},30:function(e,t,n){e.exports={info:"Info_info__1jhmd",avatar:"Info_avatar__1WQKu",description:"Info_description__387a9"}},31:function(e,t,n){e.exports={my__post:"MyPosts_my__post__EswJY"}},36:function(e,t,n){e.exports={content__head:"Profile_content__head__qXFYQ"}},37:function(e,t,n){e.exports={item:"Post_item__3-ZdD",like:"Post_like__2FxAS"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(22),s=n(2),a="ADD-MESSAGE",c="UPDATE-NEW-MESSAGE-TEXT",i={newMessageText:"",dialogsData:[{id:1,name:"Vika",img:"https://media.gq.com/photos/55828922e52bc4b477a9714f/master/pass/blogs-the-feed-dick-pic-tumblr-635.jpg"},{id:2,name:"Alex",img:"https://i1.sndcdn.com/artworks-000240511894-n0z5cp-t500x500.jpg"},{id:3,name:"Dmitry",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPTTZe_3l6aDKO88sHV9kA7xxrs5zHYronCxAaDE0PWF5ruKKtBrBkIm-HC7Q_nruuBEE&usqp=CAU"}],messagesData:[{id:1,sentBy:"r",message:"Hollo"},{id:2,sentBy:"l",message:"Hallo"},{id:3,sentBy:"l",message:"How are you"},{id:4,sentBy:"l",message:"Not bad"},{id:5,sentBy:"r",message:"Me too"},{id:6,sentBy:"l",message:"I have not asked you"},{id:7,sentBy:"l",message:"suka"},{id:8,sentBy:"r",message:"suka"},{id:9,sentBy:"l",message:"Dblia blia bliaima"},{id:10,sentBy:"r",message:"you are chiort"}]},o=function(){return{type:a}},u=function(e){return{type:c,newText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object(s.a)(Object(s.a)({},e),{},{newMessageText:"",messagesData:[].concat(Object(r.a)(e.messagesData),[{id:e.messagesData.length+1,sentBy:"r",message:e.newMessageText}])});case c:return Object(s.a)(Object(s.a)({},e),{},{newMessageText:t.newText});default:return e}}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),s=n(9),a=n(10),c=n(12),i=n(11),o=n(1),u=n.n(o),l=n(4),j=n(7),p=n(0),d=function(e){return{isAuth:e.auth.isAuth}},b=function(e){var t=function(t){Object(c.a)(o,t);var n=Object(i.a)(o);function o(){return Object(s.a)(this,o),n.apply(this,arguments)}return Object(a.a)(o,[{key:"render",value:function(){return this.props.isAuth?Object(p.jsx)(e,Object(r.a)({},this.props)):Object(p.jsx)(l.a,{to:"/login"})}}]),o}(u.a.Component);return Object(j.b)(d,{})(t)}},51:function(e,t,n){e.exports={load:"Preloader_load__-0d9G"}},52:function(e,t,n){e.exports={error:"MyPostForms_error__1Lagx"}},55:function(e,t,n){},79:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);n(55);var r=n(19),s=n(5),a=n.n(s),c=n(17),i=n(2),o=n(49).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"9eb30f89-e9e4-4d8e-ace2-9693fb3d61df"}}),u=function(e,t){return o.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},l=function(e){return o.delete("follow/".concat(e)).then((function(e){return e.data}))},j=function(e){return o.post("follow/".concat(e)).then((function(e){return e.data}))},p=function(){return o.get("auth/me").then((function(e){return e.data}))},d=function(e){return o.get("profile/".concat(e)).then((function(e){return e.data}))},b=function(e){return o.get("profile/status/"+e)},h=function(e){return o.put("profile/status",{status:e})},f=function(e,t,n,r){return""!==r?o.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r}):o.post("auth/login",{email:e,password:t,rememberMe:n})},O=function(){return o.delete("auth/login")},g=function(){return o.get("security/get-captcha-url")},m="SET-AUTH-USET-DATA",x="SET-USER-LOGDATA-ERROR",v="SET-USER-CAPTCHA-URL",_={userId:null,email:null,login:null,isAuth:!1,error:null,protection:{captchaURL:""}},P=function(e,t,n,r){return{type:m,payload:{userId:e,email:t,login:n,isAuth:r}}},w=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,c=r.email,i=r.login,t(P(s,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:n=e.sent,r=n.data.url,t({type:v,url:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.payload),{},{error:null,captcha:""});case x:return Object(i.a)(Object(i.a)({},e),{},{error:t.error,captcha:""});case v:return Object(i.a)(Object(i.a)({},e),{},{protection:Object(i.a)(Object(i.a)({},e.protection),{},{captchaURL:t.url})});default:return e}},C=n(47),N=n(22),T="ADD-POST",S="UPDATE-NEW-POST-TEXT",U="SET-USER-PROFILE",E="SET-NEW-STATUS-TEXT",I={newPostText:"",profile:null,status:"",postsData:[{id:1,name:"Pasha",message:"boo boo bi bi",likes_count:122},{id:2,name:"Pasha",message:"ifro frau",likes_count:233},{id:3,name:"Pasha",message:"isgold de fag",likes_count:223},{id:4,name:"Pasha",message:"de fag",likes_count:2223}]},A=function(e){return{type:U,profile:e}},L=function(e){return{type:E,text:e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(i.a)(Object(i.a)({},e),{},{newPostText:"",postsData:[].concat(Object(N.a)(e.postsData),[{id:e.postsData.length+1,name:"Pasha",message:e.newPostText,likes_count:0}])});case S:return Object(i.a)(Object(i.a)({},e),{},{newPostText:t.newText});case U:return Object(i.a)(Object(i.a)({},e),{},{profile:t.profile});case E:return Object(i.a)(Object(i.a)({},e),{},{status:t.text});default:return e}},R={},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type,e},M=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),r):e}))},z="FOLLOW",B="UNFOLLOW",G="SET-USERS",H="SET-CURRENT-PAGE",q="SETUSER-TOTAL-COUNT",W="TOGGLE-IS-FETCHING",X="TOGGLE-IS-FOLLOWING-PROGRESS",Y={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},K=function(e){return{type:z,userId:e}},V=function(e){return{type:B,userId:e}},Z=function(e){return{type:W,isFetching:e}},J=function(e,t){return{type:X,isFetching:e,userId:t}},Q=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(J(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(s(n)),t(J(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,s){return e.apply(this,arguments)}}(),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(i.a)(Object(i.a)({},e),{},{users:M(e.users,t.userId,"id",{followed:!0})});case B:return Object(i.a)(Object(i.a)({},e),{},{users:M(e.users,t.userId,"id",{followed:!1})});case G:return Object(i.a)(Object(i.a)({},e),{},{users:Object(N.a)(t.users)});case H:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case q:return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.count});case W:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case X:return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(N.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},ee=n(50),te="SET_INITIALIZED",ne={initialized:!1},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(i.a)(Object(i.a)({},e),{},{initialized:!0});default:return Object(i.a)({},e)}},se=Object(r.b)({profilePage:D,dialogsPage:C.b,sidebar:F,usersPage:$,auth:k,app:re}),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.c,ce=Object(r.d)(se,ae(Object(r.a)(ee.a))),ie=n(1),oe=n.n(ie),ue=n(26),le=n.n(ue),je=n(9),pe=n(10),de=n(12),be=n(11),he=(n(79),n(8)),fe=n(29),Oe=n.n(fe),ge=n(0),me=function(e){return Object(ge.jsxs)("header",{children:[Object(ge.jsxs)("div",{className:Oe.a.logo__and__name,children:[Object(ge.jsx)("img",{src:"https://img2.freepng.ru/20180518/jjg/kisspng-moroccan-cuisine-logo-sahara-restaurant-middle-eas-5aff5f15226751.5303971415266854611409.jpg"}),Object(ge.jsx)("span",{className:Oe.a.name,children:"SHARA.NET"}),Object(ge.jsx)(he.b,{to:"/hooks",children:"Hooks"})]}),Object(ge.jsx)("div",{className:Oe.a.loginBlock,children:e.isAuth?Object(ge.jsxs)("div",{children:[e.login,Object(ge.jsx)("div",{children:Object(ge.jsx)("button",{onClick:e.logoutUser,children:"Logout"})})]}):Object(ge.jsx)(he.b,{to:"/login",children:"Login"})})]})},xe=n(7),ve=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){return Object(je.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"render",value:function(){return Object(ge.jsx)(me,Object(i.a)({},this.props))}}]),n}(oe.a.Component),_e=Object(xe.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logoutUser:function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:0===e.sent.data.resultCode&&(console.log("EXIT"),t(P(null,null,null,!1)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ve),Pe=(n(86),function(){return Object(ge.jsx)("footer",{children:"All rights are defended fuck you"})}),we=n(13),ye=n.n(we),ke=function(e){return Object(ge.jsx)("nav",{children:Object(ge.jsxs)("div",{className:ye.a.nav__menu,children:[Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/profile",activeClassName:ye.a.active,children:"Profile"})}),Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/dialogs",activeClassName:ye.a.active,children:"Messages"})}),Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/news",activeClassName:ye.a.active,children:"News"})}),Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/music",activeClassName:ye.a.active,children:"Music"})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/users",activeClassName:ye.a.active,children:"Users"})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{className:ye.a.nav__item,children:Object(ge.jsx)(he.b,{to:"/settings",activeClassName:ye.a.active,children:"Settings"})})]})})},Ce=n(36),Ne=n.n(Ce),Te=n(30),Se=n.n(Te),Ue=n(51),Ee=n.n(Ue),Ie=function(e){return Object(ge.jsx)("img",{className:Ee.a.load,src:"https://orig04.deviantart.net/4590/f/2017/119/c/e/grooving_cactus__green__by_funymony-db7le16.gif"})},Ae=n(38),Le=function(e){var t=Object(ie.useState)(!0),n=Object(Ae.a)(t,2),r=n[0],s=n[1],a=Object(ie.useState)(e.status),c=Object(Ae.a)(a,2),i=c[0],o=c[1];Object(ie.useEffect)((function(){o(e.status)}),[e.status]);return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("div",{children:r?Object(ge.jsx)("div",{children:Object(ge.jsx)("span",{onDoubleClick:function(){s(!1)},children:e.status||"I dont have status"})}):Object(ge.jsx)("div",{children:Object(ge.jsx)("input",{placeholder:"\u043c\u043e\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",onChange:function(e){var t=e.currentTarget.value;o(t)},onMouseLeave:function(){s(!0),e.updateStatus(i)},value:i})})})})},De=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){return Object(je.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"render",value:function(){return Object(ge.jsx)("div",{children:Object(ge.jsx)(Le,Object(i.a)({},this.props))})}}]),n}(oe.a.Component),Re=Object(xe.b)((function(e){return{status:e.profilePage.status}}),{updateStatus:function(e){return function(t){h(e).then((function(n){0===n.data.resultCode&&t(L(e))}))}}})(De),Fe=function(e){return e.profile?Object(ge.jsxs)("div",{className:Se.a.info,children:[Object(ge.jsx)("div",{className:Se.a.avatar,children:Object(ge.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:"https://img.icons8.com/cotton/2x/fa314a/person-male--v2.png"})}),Object(ge.jsxs)("div",{className:Se.a.description,children:[e.profile.fullName,Object(ge.jsxs)("div",{children:[Object(ge.jsx)("h3",{children:"About me"}),Object(ge.jsx)(Re,{status:e.status})]}),Object(ge.jsxs)("div",{children:[Object(ge.jsxs)("h3",{children:["instagram: ",Object(ge.jsx)("a",{href:e.profile.contacts.instagram,children:"\u0447\u0435\u043a\u0430\u0439 \u043c\u043e\u0439 \u0438\u043d\u0441\u0442"})]}),Object(ge.jsxs)("h3",{children:["git: ",Object(ge.jsx)("a",{href:e.profile.contacts.github,children:"\u0447\u0435\u043a\u0430\u0439 \u043c\u043e\u0439 \u0433\u0438\u0442"})]})]})]})]}):Object(ge.jsx)(Ie,{})},Me=n(31),ze=n.n(Me),Be=n(37),Ge=n.n(Be),He=function(e){return Object(ge.jsx)("div",{className:"Post",children:Object(ge.jsxs)("div",{className:Ge.a.item,children:[Object(ge.jsx)("img",{src:"https://cs9.pikabu.ru/post_img/big/2018/10/22/10/1540228059127699409.jpg"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("div",{children:e.name}),Object(ge.jsx)("div",{children:e.message}),Object(ge.jsxs)("div",{className:Ge.a.like,children:[Object(ge.jsx)("span",{children:Object(ge.jsx)("img",{src:"https://pngicon.ru/file/uploads/like.png"})}),Object(ge.jsx)("input",{id:"like",type:"number",value:e.likes_count,readOnly:!0})]})]})})},qe=n(52),We=n.n(qe),Xe=n(20),Ye=n(54),Ke=["input"],Ve=function(e){var t=e.input,n=Object(Ye.a)(e,Ke);return Object(ge.jsx)("div",{children:Object(ge.jsx)("textarea",Object(i.a)(Object(i.a)(Object(i.a)({},t),n),{},{placeholder:n.placeholder}))})},Ze=function(e){var t;return Object(ge.jsx)(Xe.b,{onSubmit:function(t){e.updatePostText(t.post),e.addPost()},validate:(t=100,function(e){var n={};return e.post?e.post.length>t&&(n.post="to long"):n.post="Do you want to make a post?",n}),render:function(e){var t=e.handleSubmit;return Object(ge.jsxs)("form",{onSubmit:t,children:[Object(ge.jsx)("lable",{children:"Make a post"}),Object(ge.jsx)(Xe.a,{name:"post",children:function(e){var t=e.input,n=e.meta;return Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Ve,Object(i.a)(Object(i.a)({},t),{},{placeholder:"some post text"})),n.touched&&n.error&&Object(ge.jsx)("span",{className:We.a.error,children:n.error})]})}}),Object(ge.jsx)("button",{type:"submit",children:"Post"})]})}})},Je=function(e){var t=e.posts.map((function(e){return Object(ge.jsx)(He,{name:e.name,message:e.message,likes_count:e.likes_count},e.id)}));return t.reverse(),Object(ge.jsx)("div",{className:"Post",children:Object(ge.jsxs)("div",{className:ze.a.post,children:[Object(ge.jsx)("div",{className:ze.a.my__post,children:Object(ge.jsx)(Ze,{addPost:e.addPost,updatePostText:e.updatePostText})}),Object(ge.jsx)("div",{className:ze.a.posts,children:t})]})})},Qe=Object(xe.b)((function(e){return{posts:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{updatePostText:function(e){return{type:S,newText:e}},addPost:function(){return{type:T}}})((function(e){return console.log("rerender"),Object(ge.jsx)(Je,Object(i.a)({},e))})),$e=function(e){return Object(ge.jsxs)("div",{className:"Content",children:[Object(ge.jsx)("div",{className:Ne.a.content__head,children:Object(ge.jsx)("img",{src:"https://i.gifer.com/1Zla.gif"})}),Object(ge.jsxs)("div",{className:Ne.a.post__content,children:[Object(ge.jsx)(Fe,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(ge.jsx)("h3",{children:"My posts"}),Object(ge.jsx)(Qe,{})]})]})},et=n(4),tt=n(48),nt=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){return Object(je.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(ge.jsx)($e,Object(i.a)(Object(i.a)({},this.props),{},{status:this.props.status}))}}]),n}(oe.a.Component),rt=Object(r.c)(Object(xe.b)((function(e){return{profile:e.profilePage.profile,authUserId:e.auth.userId,status:e.profilePage.status}}),{getUserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(t){d(e).then((function(e){t(A(e))}))}},getStatus:function(e){return function(t){b(e).then((function(e){t(L(e.data))}))}}}),et.f,tt.a)(nt),st=n(21),at=n.n(st),ct=function(e){var t=e.users,n=e.followingInProgress,r=e.unfollow,s=e.follow;return Object(ge.jsx)(ge.Fragment,{children:t.map((function(e){return Object(ge.jsxs)("div",{className:at.a.friend,children:[Object(ge.jsx)(he.b,{to:"/profile/"+e.id,children:Object(ge.jsx)("img",{src:null!=e.photos.small?e.photos.small:"https://w7.pngwing.com/pngs/81/570/png-transparent-profile-logo-computer-icons-user-user-blue-heroes-logo-thumbnail.png"})}),Object(ge.jsx)("div",{children:e.name}),Object(ge.jsx)("div",{children:e.status}),e.followed?Object(ge.jsx)("button",{disabled:n.some((function(t){return t===e.id})),onClick:function(){r(e.id)},children:"unfollow"}):Object(ge.jsx)("button",{disabled:n.some((function(t){return t===e.id})),onClick:function(){s(e.id)},children:"follow"})]},e.id)}))})},it=function(e){var t=e.currentPage,n=e.p,r=e.setCurrentPage,s=e.onPageChanged;return Object(ge.jsxs)("span",{className:t===n?at.a.selectedPage:at.a.page,onClick:t!==n?function(){r(n),s(n)}:null,children:[" ",n," "]})},ot=function(e){return Object(ge.jsx)("div",{className:at.a.pages,children:Object(ge.jsx)("div",{children:e.pages.map((function(t){return 1===t||Math.abs(e.currentPage-t)<5||t===e.pages.length?Object(ge.jsx)(it,{p:t,currentPage:e.currentPage,setCurrentPage:e.setCurrentPage,onPageChanged:e.onPageChanged}):Math.abs(e.currentPage-t)<6?"...":void 0}))})})},ut=function(e){return Object(ge.jsxs)("div",{className:at.a.friendsList,children:[Object(ge.jsx)(ct,{users:e.users,followingInProgress:e.followingInProgress,unfollow:e.unfollow,follow:e.follow}),Object(ge.jsx)(ot,{setCurrentPage:e.setCurrentPage,currentPage:e.currentPage,onPageChanged:e.onPageChanged,pages:e.pages})]})},lt=n(53),jt=function(e){return e.usersPage.users},pt=(Object(lt.a)(jt,(function(e){return e.filter((function(e){return!0}))})),function(e){return e.usersPage.pageSize}),dt=function(e){return e.usersPage.totalUsersCount},bt=function(e){return e.usersPage.currentPage},ht=function(e){return e.usersPage.isFetching},ft=function(e){return e.usersPage.followingInProgress},Ot=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){var e;Object(je.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.requestUsersPages(t,e.props.pageSize)},e}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.requestUsersPages(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){for(var e=Math.ceil(this.props.totalUsersCount/this.props.pageSize),t=[],n=1;n<=e;n++)t.push(n);return Object(ge.jsx)(ge.Fragment,{children:this.props.isFetching?Object(ge.jsx)(Ie,{}):Object(ge.jsx)(ut,{pages:t,pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress,currentPage:this.props.currentPage,setCurrentPage:this.props.setCurrentPage})})}}]),n}(oe.a.Component),gt=Object(xe.b)((function(e){return{users:jt(e),pageSize:pt(e),totalUsersCount:dt(e),currentPage:bt(e),isFetching:ht(e),followingInProgress:ft(e)}}),{follow:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Q(n,e,j,K);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Q(n,e,l,V);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:function(e){return{type:H,currentPage:e}},requestUsersPages:function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Z(!0)),n.next=3,u(e,t);case 3:s=n.sent,r(Z(!1)),r((c=s.items,{type:G,users:c})),r((a=s.totalCount,{type:q,count:a}));case 7:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}()}})(Ot),mt=function(e){var t={};return e.login||(t.login="how about login?"),e.password||(t.password="how about password?"),t},xt=function(e){var t=e.loginUser,n=e.error,r=e.captchaURL,s=function(){var e=Object(c.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(r.login,r.password,r.rememberMe,r.captcha),!n){e.next=3;break}return e.abrupt("return",{login:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsx)(Xe.b,{onSubmit:s,validate:mt,render:function(e){var t=e.handleSubmit;return Object(ge.jsxs)("form",{onSubmit:t,children:[Object(ge.jsx)(Xe.a,{name:"login",children:function(e){var t=e.input,n=e.meta;return Object(ge.jsxs)("div",{children:[Object(ge.jsx)("input",Object(i.a)(Object(i.a)({},t),{},{type:"text",placeholder:"login"})),(n.error||n.submitError)&&n.touched&&Object(ge.jsx)("span",{children:n.error||n.submitError})]})}}),Object(ge.jsx)(Xe.a,{name:"password",children:function(e){var t=e.input,n=e.meta;return Object(ge.jsxs)("div",{children:[Object(ge.jsx)("input",Object(i.a)(Object(i.a)({},t),{},{type:"password",placeholder:"Password"})),n.error&&n.touched&&Object(ge.jsx)("span",{children:n.error})]})}}),r?Object(ge.jsxs)("div",{children:[Object(ge.jsx)("img",{src:r}),Object(ge.jsx)("div",{children:Object(ge.jsx)(Xe.a,{name:"captcha",type:"text",component:"input"})})]}):null,Object(ge.jsxs)("div",{children:[Object(ge.jsx)(Xe.a,{name:"rememberMe",component:"input",type:"checkbox"}),Object(ge.jsx)("supn",{children:"remember me"})]}),Object(ge.jsx)("button",{type:"submit",children:" log in "})]})}})},vt=function(e){return e.isAuth?Object(ge.jsx)(et.a,{to:"/profile"}):Object(ge.jsxs)("div",{children:[Object(ge.jsx)("h1",{children:"Login"}),Object(ge.jsx)(xt,{captchaURL:e.captchaURL,error:e.error,loginUser:e.loginUser})]})},_t=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){return Object(je.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"render",value:function(){return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)(vt,{captchaURL:this.props.captchaURL,error:this.props.error,isAuth:this.props.isAuth,loginUser:this.props.loginUser})})}}]),n}(oe.a.Component),Pt=Object(xe.b)((function(e){return{isAuth:e.auth.isAuth,error:e.auth.error,captchaURL:e.auth.protection.captchaURL}}),{loginUser:function(e,t,n,r){return function(){var s=Object(c.a)(a.a.mark((function s(c){var i,o;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f(e,t,n,r);case 2:0===(i=s.sent).data.resultCode?(console.log("success"),c(w())):10===i.data.resultCode?c(y()):(o=i.data.messages.length>0?i.data.messages[0]:"some error",c({type:x,error:o}));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})(_t),wt=oe.a.lazy((function(){return n.e(4).then(n.bind(null,91))})),yt=oe.a.lazy((function(){return n.e(3).then(n.bind(null,92))})),kt=function(e){Object(de.a)(n,e);var t=Object(be.a)(n);function n(){return Object(je.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(ge.jsxs)("div",{className:"app__wrapper",children:[Object(ge.jsx)("div",{className:"app__wrapper__header",children:Object(ge.jsx)(_e,{})}),Object(ge.jsx)("div",{className:"app__wrapper__nav",children:Object(ge.jsx)(ke,{})}),Object(ge.jsxs)("div",{className:"app__wrapper__content",children:[Object(ge.jsx)(et.b,{path:"/profile/:userId?",render:function(){return Object(ge.jsx)(rt,{})}}),Object(ge.jsx)(et.b,{path:"/dialogs",render:function(){return Object(ge.jsx)(oe.a.Suspense,{fallback:Object(ge.jsx)("div",{children:"Loading..."}),children:Object(ge.jsx)(yt,{})})}}),Object(ge.jsx)(et.b,{path:"/users",render:function(){return Object(ge.jsx)(gt,{})}}),Object(ge.jsx)(et.b,{path:"/login",render:function(){return Object(ge.jsx)(Pt,{})}}),Object(ge.jsx)(et.b,{path:"/hooks",render:function(){return Object(ge.jsx)(oe.a.Suspense,{fallback:Object(ge.jsx)("div",{children:"Loading..."}),children:Object(ge.jsx)(wt,{})})}})]}),Object(ge.jsx)("div",{className:"app__wrapper__footer",children:Object(ge.jsx)(Pe,{})})]}):Object(ge.jsx)(Ie,{})}}]),n}(oe.a.Component),Ct=Object(r.c)(et.f,Object(xe.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(w());Promise.all([t]).then((function(){e({type:te})}))}}}))(kt),Nt=function(e){return Object(ge.jsx)(he.a,{children:Object(ge.jsx)(xe.a,{store:ce,children:Object(ge.jsx)(Ct,{})})})};le.a.render(Object(ge.jsx)(Nt,{}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.39136c65.chunk.js.map